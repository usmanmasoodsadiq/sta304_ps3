# Maybe make some age-groups?
# Maybe check the values?
# Is vote a binary? If not, what are you going to do?
reduced_data<-
reduced_data %>%
mutate(vote_trump =
ifelse(vote_2020=="Donald Trump", 1, 0))
# Saving the survey/sample data as a csv file in my
# working directory
write_csv(reduced_data, "outputs/survey_data.csv")
#### Preamble ####
# Purpose: Prepare and clean the survey data downloaded from [...UPDATE ME!!!!!]
# Author: Rohan Alexander and Sam Caetano [CHANGE THIS TO YOUR NAME!!!!]
# Data: 22 October 2020
# Contact: rohan.alexander@utoronto.ca [PROBABLY CHANGE THIS ALSO!!!!]
# License: MIT
# Pre-requisites:
# - Need to have downloaded the data from X and save the folder that you're
# interested in to inputs/data
# - Don't forget to gitignore it!
#### Workspace setup ####
library(haven)
library(tidyverse)
setwd("/Users/Victor/Documents/sta304_ps3")
# Read in the raw data (You might need to change this if you use a different dataset)
raw_data <- read_dta("ns20200625/ns20200625.dta")
# Add the labels
raw_data <- labelled::to_factor(raw_data)
# Just keep some variables
reduced_data <-
raw_data %>%
select(interest,
registration,
vote_2016,
vote_intention,
vote_2020,
ideo5,
employment,
foreign_born,
gender,
census_region,
hispanic,
race_ethnicity,
household_income,
education,
state,
congress_district,
age)
#### What else???? ####
# Maybe make some age-groups?
# Maybe check the values?
# Is vote a binary? If not, what are you going to do?
reduced_data<-
reduced_data %>%
mutate(vote_trump =
ifelse(vote_2020=="Donald Trump", 1, 0))
# Saving the survey/sample data as a csv file in my
# working directory
write_csv(reduced_data, "outputs/survey_data.csv")
# Saving the survey/sample data as a csv file in my
# working directory
write_csv(reduced_data, "Users/Victor/survey_data.csv")
#### Preamble ####
# Purpose: Prepare and clean the survey data downloaded from [...UPDATE ME!!!!!]
# Author: Rohan Alexander and Sam Caetano [CHANGE THIS TO YOUR NAME!!!!]
# Data: 22 October 2020
# Contact: rohan.alexander@utoronto.ca [PROBABLY CHANGE THIS ALSO!!!!]
# License: MIT
# Pre-requisites:
# - Need to have downloaded the data from X and save the folder that you're
# interested in to inputs/data
# - Don't forget to gitignore it!
#### Workspace setup ####
library(haven)
library(tidyverse)
setwd("/Users/Victor/Documents/sta304_ps3")
# Read in the raw data (You might need to change this if you use a different dataset)
raw_data <- read_dta("ns20200625/ns20200625.dta")
# Add the labels
raw_data <- labelled::to_factor(raw_data)
# Just keep some variables
reduced_data <-
raw_data %>%
select(interest,
registration,
vote_2016,
vote_intention,
vote_2020,
ideo5,
employment,
foreign_born,
gender,
census_region,
hispanic,
race_ethnicity,
household_income,
education,
state,
congress_district,
age)
#### What else???? ####
# Maybe make some age-groups?
# Maybe check the values?
# Is vote a binary? If not, what are you going to do?
reduced_data<-
reduced_data %>%
mutate(vote_trump =
ifelse(vote_2020=="Donald Trump", 1, 0))
# Saving the survey/sample data as a csv file in my
# working directory
write_csv(reduced_data, "Users/Victor/survey_data.csv")
#### Preamble ####
# Purpose: Prepare and clean the survey data downloaded from [...UPDATE ME!!!!!]
# Author: Rohan Alexander and Sam Caetano [CHANGE THIS TO YOUR NAME!!!!]
# Data: 22 October 2020
# Contact: rohan.alexander@utoronto.ca [PROBABLY CHANGE THIS ALSO!!!!]
# License: MIT
# Pre-requisites:
# - Need to have downloaded the data from X and save the folder that you're
# interested in to inputs/data
# - Don't forget to gitignore it!
#### Workspace setup ####
library(haven)
library(tidyverse)
setwd("Users/Victor/Documents/sta304_ps3")
# Read in the raw data (You might need to change this if you use a different dataset)
raw_data <- read_dta("inputs/ns20200625/ns20200625.dta")
# Add the labels
raw_data <- labelled::to_factor(raw_data)
# Just keep some variables
reduced_data <-
raw_data %>%
select(interest,
registration,
vote_2016,
vote_intention,
vote_2020,
ideo5,
employment,
foreign_born,
gender,
census_region,
hispanic,
race_ethnicity,
household_income,
education,
state,
congress_district,
age)
#### What else???? ####
# Maybe make some age-groups?
# Maybe check the values?
# Is vote a binary? If not, what are you going to do?
reduced_data<-
reduced_data %>%
mutate(vote_trump =
ifelse(vote_2020=="Donald Trump", 1, 0))
# Saving the survey/sample data as a csv file in my
# working directory
write_csv(reduced_data, "outputs/survey_data.csv")
source('~/Documents/sta304_ps3/01-data_cleaning-survey1.R')
#### Workspace setup ####
library(haven)
library(tidyverse)
setwd("Users/Victor/Documents/sta304_ps3")
# Read in the raw data (You might need to change this if you use a different dataset)
raw_data <- read_dta("inputs/ns20200625/ns20200625.dta")
# Add the labels
raw_data <- labelled::to_factor(raw_data)
# Just keep some variables
reduced_data <-
raw_data %>%
select(interest,
registration,
vote_2016,
vote_intention,
vote_2020,
ideo5,
employment,
foreign_born,
gender,
census_region,
hispanic,
race_ethnicity,
household_income,
education,
state,
congress_district,
age)
#### What else???? ####
# Maybe make some age-groups?
# Maybe check the values?
# Is vote a binary? If not, what are you going to do?
reduced_data<-
reduced_data %>%
mutate(vote_trump =
ifelse(vote_2020=="Donald Trump", 1, 0))
# Saving the survey/sample data as a csv file in my
# working directory
write_csv(reduced_data, "outputs/survey_data.csv")
#### Workspace setup ####
library(haven)
library(tidyverse)
setwd("Users/Victor/Documents/sta304_ps3")
# Read in the raw data (You might need to change this if you use a different dataset)
raw_data <- read_dta("inputs/ns20200625/ns20200625.dta")
# Add the labels
raw_data <- labelled::to_factor(raw_data)
# Just keep some variables
reduced_data <-
raw_data %>%
select(interest,
registration,
vote_2016,
vote_intention,
vote_2020,
ideo5,
employment,
foreign_born,
gender,
census_region,
hispanic,
race_ethnicity,
household_income,
education,
state,
congress_district,
age)
#### What else???? ####
# Maybe make some age-groups?
# Maybe check the values?
# Is vote a binary? If not, what are you going to do?
reduced_data<-
reduced_data %>%
mutate(vote_trump =
ifelse(vote_2020=="Donald Trump", 1, 0))
# Saving the survey/sample data as a csv file in my
# working directory
write_csv(reduced_data, "outputs/survey_data.csv")
setwd("Users/Victor/Documents/sta304_ps3")
# Read in the raw data (You might need to change this if you use a different dataset)
raw_data <- read_dta("inputs/ns20200625/ns20200625.dta")
# Add the labels
raw_data <- labelled::to_factor(raw_data)
# Just keep some variables
reduced_data <-
raw_data %>%
select(interest,
registration,
vote_2016,
vote_intention,
vote_2020,
ideo5,
employment,
foreign_born,
gender,
census_region,
hispanic,
race_ethnicity,
household_income,
education,
state,
congress_district,
age)
setwd("Users/Victor/Documents/sta304_ps3")
# Read in the raw data (You might need to change this if you use a different dataset)
raw_data <- read_dta("ns20200625/ns20200625.dta")
# Add the labels
raw_data <- labelled::to_factor(raw_data)
# Just keep some variables
reduced_data <-
raw_data %>%
select(interest,
registration,
vote_2016,
vote_intention,
vote_2020,
ideo5,
employment,
foreign_born,
gender,
census_region,
hispanic,
race_ethnicity,
household_income,
education,
state,
congress_district,
age)
#### What else???? ####
# Maybe make some age-groups?
# Maybe check the values?
# Is vote a binary? If not, what are you going to do?
reduced_data<-
reduced_data %>%
mutate(vote_trump =
ifelse(vote_2020=="Donald Trump", 1, 0))
setwd("Users/Victor/Documents/sta304_ps3")
# Read in the raw data (You might need to change this if you use a different dataset)
raw_data <- read_dta("ns20200625/ns20200625.dta")
# Add the labels
raw_data <- labelled::to_factor(raw_data)
# Just keep some variables
reduced_data <-
raw_data %>%
select(interest,
registration,
vote_2016,
vote_intention,
vote_2020,
ideo5,
employment,
foreign_born,
gender,
census_region,
hispanic,
race_ethnicity,
household_income,
education,
state,
congress_district,
age)
#### What else???? ####
# Maybe make some age-groups?
# Maybe check the values?
# Is vote a binary? If not, what are you going to do?
reduced_data<-
reduced_data %>%
mutate(vote_trump =
ifelse(vote_2020=="Donald Trump", 1, 0))
# Saving the survey/sample data as a csv file in my
# working directory
write_csv(reduced_data, "outputs/survey_data.csv")
#### Preamble ####
# Purpose: Prepare and clean the survey data downloaded from [...UPDATE ME!!!!!]
# Author: Rohan Alexander and Sam Caetano [CHANGE THIS TO YOUR NAME!!!!]
# Data: 22 October 2020
# Contact: rohan.alexander@utoronto.ca [PROBABLY CHANGE THIS ALSO!!!!]
# License: MIT
# Pre-requisites:
# - Need to have downloaded the data from X and save the folder that you're
# interested in to inputs/data
# - Don't forget to gitignore it!
#### Workspace setup ####
library(haven)
library(tidyverse)
setwd("Users/Victor/Documents/sta304_ps3")
# Read in the raw data (You might need to change this if you use a different dataset)
raw_data <- read_dta("ns20200625/ns20200625.dta")
# Add the labels
raw_data <- labelled::to_factor(raw_data)
# Just keep some variables
reduced_data <-
raw_data %>%
select(interest,
registration,
vote_2016,
vote_intention,
vote_2020,
ideo5,
employment,
foreign_born,
gender,
census_region,
hispanic,
race_ethnicity,
household_income,
education,
state,
congress_district,
age)
#### What else???? ####
# Maybe make some age-groups?
# Maybe check the values?
# Is vote a binary? If not, what are you going to do?
reduced_data<-
reduced_data %>%
mutate(vote_trump =
ifelse(vote_2020=="Donald Trump", 1, 0))
# Saving the survey/sample data as a csv file in my
# working directory
write_csv(reduced_data, "survey_data.csv")
library(tidyverse)
# Loading in the cleaned survey Data
survey_data <- read_csv("./survey_data.csv")
# Loading in the cleaned census Data
census_data <- read_csv("C:/Users/Sammi-Jo/Desktop/PS3/outputs/census_data.csv")
# Loading in the cleaned survey Data
survey_data <- read_csv("./survey_data.csv")
library(tidyverse)
# Loading in the cleaned survey Data
survey_data <- read_csv("./survey_data.csv")
library(tidyverse)
# Loading in the cleaned survey Data
survey_data <- read_csv("./survey_data.csv")
# Loading in the cleaned census Data
census_data <- read_csv("C:/Users/Sammi-Jo/Desktop/PS3/outputs/census_data.csv")
library(tidyverse)
# Loading in the cleaned survey Data
survey_data <- read_csv("./survey_data.csv")
---
title: "Analysing the Key Factors in predicting the 2020 Election"
author: "Victor ChanYoung Cho, Usman Sadiq"
date: "Nov 2nd, 2020"
output:
pdf_document: default
html_document:
df_print: paged
---
# Abstract
TODO The overall summmary of the report; Mainly include background, what we did for the analyses, results and discussion.
# Introduction
TODO Add intro; Background info of what we are doing, what analyses we will be doing
# Data
TODO Add data description; we will be using the UCLA Data and the ACS data...etc
```{r setup, include=FALSE}
library(tidyverse)
# Loading in the cleaned survey Data
survey_data <- read_csv("./survey_data.csv")
# Loading in the cleaned census Data
census_data <- read_csv("./census_data.csvss")
```
# Model
Here we are interested in predicting the popular vote outcome of the 2020 American federal election (include citation). To do this we are employing a post-stratification technique. In the following sub-sections I will describe the model specifics and the post-stratification calculation.
## Model Specifics
I will (incorrectly) be using a linear regression model to model the proportion of voters who will vote for Donald Trump. This is a naive model. I will only be using age, which is recorded as a numeric variable, to model the probability of voting for Donald Trump. The simple linear regression model I am using is:
$$ y = \beta_0+\beta_1  x_{age} + \epsilon$$
Where $y$ represents the proportion of voters who will vote for Donald Trump. Similarly, $\beta_0$ represents the intercept of the model, and is the probability of voting for Donald Trump at age 0. Additionally, $\beta_1$ represents the slope of the model. So, for everyone one unit increase in age, we expect a $\beta_1$ increase in the probability of voting for Donald Trump.
```{r, include=FALSE}
# Creating the Model
model <- lm(vote_trump ~ age,
data=survey_data)
# Model Results (to Report in Results section)
# summary(model)
# OR
# broom::tidy(model)
```
## Post-Stratification
In order to estimate the proportion of voters who will vote for Donald Trump I need to perform a post-stratification analysis. Here I create cells based off different ages. Using the model described in the previous sub-section I will estimate the proportion of voters in each age bin. I will then weight each proportion estimate (within each bin) by the respective population size of that bin and sum those values and divide that by the entire population size.
```{r, include=FALSE}
# Here I will perform the post-stratification calculation
census_data$estimate <-
model %>%
predict(newdata = census_data)
census_data %>%
mutate(alp_predict_prop = estimate*n) %>%
summarise(alp_predict = sum(alp_predict_prop)/sum(n))
```
# Results
Here you will include all results. This includes descriptive statistics, graphs, figures, tables, and model results. Please ensure that everything is well formatted and in a report style. You must also provide an explanation of the results in this section.
Please ensure that everything is well labelled. So if you have multiple histograms and plots, calling them Figure 1, 2, 3, etc. and referencing them as Figure 1, Figure 2, etc. in your report will be expected. The reader should not get lost in a sea of information. Make sure to have the results be clean, well formatted and digestible.
# Discussion
Here you will summarize the previous sections and discuss conclusions drawn from the results. Make sure to elaborate and connect your analysis to the goal of the study.
## Weaknesses
Here we discuss weaknesses of the study, data, analysis, etc. You can also discuss areas for improvement.
## Next Steps
Here you discuss subsequent work to be done after this report. This can include next steps in terms of statistical analysis (perhaps there is a more efficient algorithm available, or perhaps there is a caveat in the data that would allow for some new technique). Future steps should also be specified in terms of the study setting (eg. including a follow-up survey on something, or a subsequent study that would complement the conclusions of your report).
# References
Tausanovitch, Chris and Lynn Vavreck. 2020. Democracy Fund + UCLA Nationscape, October 10-17, 2019 (version
20200814). Retrieved from [https://www.voterstudygroup.org/downloads?key=9e0589c5-5ecc-4575-be2a-8285262f97fe].
Steven Ruggles, Sarah Flood, Ronald Goeken, Josiah Grover, Erin Meyer, Jose Pacas and Matthew Sobek. IPUMS USA: Version
10.0 [dataset]. Minneapolis, MN: IPUMS, 2020. https://doi.org/10.18128/D010.V10.0
library(tidyverse)
# Loading in the cleaned survey Data
survey_data <- read_csv("./survey_data.csv")
library(tidyverse)
# Loading in the cleaned survey Data
survey_data <- read_csv(".outputs/survey_data.csv")
library(tidyverse)
# Loading in the cleaned survey Data
survey_data <- read_csv("./outputs/survey_data.csv")
# Loading in the cleaned census Data
census_data <- read_csv("./outputs/census_data.csv")
library(tidyverse)
# Loading in the cleaned survey Data
survey_data <- read_csv("./outputs/survey_data.csv")
# Loading in the cleaned census Data
census_data <- read_csv("./outputs/census_data.csv")
attach(survey_data)
# build the model
logitm <- glm(vote_trump~as.factor(employment)+as.factor(gender)+as.factor(race_ethnicity)+as.factor(household_income)+as.factor(education)+as.factor(age_group), family = "binomial")
survey_data
attach(survey_data)
# build the model
logitm <- glm(vote_trump~as.factor(employment)+as.factor(gender)+as.factor(race_ethnicity)+as.factor(household_income)+as.factor(education)+as.factor(age), family = "binomial")
detach(survey_data)
Summary(logitm)
# build the model
logitm <- glm(vote_trump~as.factor(employment)+as.factor(gender)+as.factor(race_ethnicity)+as.factor(household_income)+as.factor(education)+as.factor(age), family = "binomial")
summary(logitm)
library(tidyverse)
# Loading in the cleaned survey Data
survey_data <- read_csv("./outputs/survey_data.csv")
# Loading in the cleaned census Data
census_data <- read_csv("./outputs/census_data.csv")
survey_data
logitm <- glm(vote_trump~as.factor(employment)+as.factor(gender)+as.factor(race_ethnicity)+as.factor(household_income)+as.factor(education)+as.factor(age), family = "binomial")
logitm <- glm(data=survey_data, vote_trump~as.factor(employment)+as.factor(gender)+as.factor(race_ethnicity)+as.factor(household_income)+as.factor(education)+as.factor(age), family = "binomial")
logitm <- glm(data=survey_data, vote_trump~as.factor(employment)+as.factor(gender)+as.factor(race_ethnicity)+as.factor(household_income)+as.factor(education)+as.factor(age), family = "binomial")
summary(logitm)
library(tidyverse)
# Loading in the cleaned survey Data
survey_data <- read_csv("./outputs/survey_data.csv")
# Loading in the cleaned census Data
census_data <- read_csv("./outputs/census_data.csv")
survey_data
logreg <- glm(data=survey_data, vote_trump~as.factor(employment)+as.factor(gender)+as.factor(race_ethnicity)+as.factor(household_income)+as.factor(education)+as.factor(age) + as.factor(hispanic), family = "binomial")
# summary(logitm)
# Model Results (to Report in Results section)
# summary(model)
# OR
broom::tidy(logreg)
